@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix destiny: <https://destiny.example.org/vocab/> .

# =============================================================================
# DESTINY Core Ontology
# =============================================================================
#
# A lightweight ontology for structured research evidence. Defines the core
# classes and properties that domain-specific vocabularies (education, health,
# climate) extend.
#
# Design principles:
#   - OWL for expressiveness, but no reasoning required
#   - Union classes for shared property domains
#   - SKOS Concepts for controlled vocabularies
#   - Validation via SHACL, not OWL restrictions
#
# =============================================================================

destiny: a owl:Ontology ;
    rdfs:label "DESTINY Core Ontology" ;
    rdfs:comment """Core classes and properties for the DESTINY evidence repository. 
    Provides a foundation for domain-specific extensions (education, health, climate).""" ;
    dcterms:created "2025-01-01"^^xsd:date ;
    owl:versionInfo "0.1.0" .


# =============================================================================
# CORE CLASSES
# =============================================================================

destiny:Investigation a owl:Class ;
    rdfs:label "Investigation" ;
    rdfs:comment """A discrete research effort reported within a reference. 
    Corresponds to a study, trial, or evaluation. A single paper may report 
    multiple investigations. An investigation produces one or more Findings.""" .

destiny:Finding a owl:Class ;
    rdfs:label "Finding" ;
    rdfs:comment """The atomic unit of evidence. A specific result for a specific 
    intervention, outcome, population, and context. The level at which effect 
    sizes are reported and meta-analysis operates.""" .

destiny:Intervention a owl:Class ;
    rdfs:label "Intervention" ;
    rdfs:comment """A policy, program, practice, or treatment being evaluated. 
    May be described at varying levels of specificity.""" .

destiny:Outcome a owl:Class ;
    rdfs:label "Outcome" ;
    rdfs:comment """A measured result or endpoint. Outcomes are defined in 
    domain-specific vocabularies (e.g., learning outcomes, health outcomes).""" .

destiny:EffectEstimate a owl:Class ;
    rdfs:label "Effect Estimate" ;
    rdfs:comment """A quantitative estimate of effect size with associated 
    uncertainty measures. Supports multiple effect size metrics.""" .

destiny:Context a owl:Class ;
    rdfs:label "Context" ;
    rdfs:comment """The setting and circumstances in which an investigation 
    took place. Includes geographic, institutional, and temporal context.""" .

destiny:Funder a owl:Class ;
    rdfs:label "Funder" ;
    rdfs:comment """An organisation providing financial support. May fund 
    the intervention, the research, or both.""" .

destiny:Implementer a owl:Class ;
    rdfs:label "Implementer" ;
    rdfs:comment """An organisation or entity responsible for delivering 
    an intervention.""" .


# =============================================================================
# UNION CLASSES (shared property domains)
# =============================================================================

destiny:Fundable a owl:Class ;
    owl:unionOf (destiny:Investigation destiny:Intervention) ;
    rdfs:label "Fundable" ;
    rdfs:comment """Entities that can receive funding. Both investigations 
    (research funding) and interventions (program funding) are fundable.""" .




# =============================================================================
# DISJOINTNESS
# =============================================================================

# Core entity types are mutually exclusive
[] a owl:AllDisjointClasses ;
    owl:members (
        destiny:Investigation
        destiny:Finding
        destiny:Intervention
        destiny:EffectEstimate
        destiny:Context
    ) .


# =============================================================================
# OBJECT PROPERTIES (relationships between entities)
# =============================================================================

# -- Structural hierarchy --

destiny:hasFinding a owl:ObjectProperty ;
    rdfs:label "has finding" ;
    rdfs:comment "Links an investigation to its constituent findings." ;
    rdfs:domain destiny:Investigation ;
    rdfs:range destiny:Finding .

destiny:partOfInvestigation a owl:ObjectProperty ;
    owl:inverseOf destiny:hasFinding ;
    rdfs:label "part of investigation" ;
    rdfs:comment "Links a finding back to its parent investigation." ;
    rdfs:domain destiny:Finding ;
    rdfs:range destiny:Investigation .

# -- What was studied --

destiny:evaluates a owl:ObjectProperty ;
    rdfs:label "evaluates" ;
    rdfs:comment "Links a finding to the intervention being evaluated." ;
    rdfs:domain destiny:Finding ;
    rdfs:range destiny:Intervention .

destiny:hasOutcome a owl:ObjectProperty ;
    rdfs:label "has outcome" ;
    rdfs:comment "Links a finding to its measured outcome." ;
    rdfs:domain destiny:Finding ;
    rdfs:range destiny:Outcome .

destiny:outcomeDescription a owl:DatatypeProperty ;
    rdfs:label "outcome description" ;
    rdfs:comment """Free-text description of the specific measure used, as described 
    by the study author (e.g., 'EGRA oral reading fluency, words per minute').""" ;
    rdfs:domain destiny:Outcome ;
    rdfs:range xsd:string .

destiny:hasContext a owl:ObjectProperty ;
    rdfs:label "has context" ;
    rdfs:comment """Links a finding to the geographic/institutional context where 
    the research took place. Context is on Finding (not Investigation) because 
    a single investigation may span multiple contexts.""" ;
    rdfs:domain destiny:Finding ;
    rdfs:range destiny:Context .

destiny:country a owl:ObjectProperty ;
    rdfs:label "country" ;
    rdfs:comment "The country where research took place. Values should be ISO 3166-1 codes." ;
    rdfs:domain destiny:Context .

# -- Funding and implementation --

destiny:fundedBy a owl:ObjectProperty ;
    rdfs:label "funded by" ;
    rdfs:comment "Links a fundable entity to its funder(s)." ;
    rdfs:domain destiny:Fundable ;
    rdfs:range destiny:Funder .

destiny:implementedBy a owl:ObjectProperty ;
    rdfs:label "implemented by" ;
    rdfs:comment "Links an intervention to its implementing organisation." ;
    rdfs:domain destiny:Intervention ;
    rdfs:range destiny:Implementer .

# -- Effect estimates --

destiny:hasEffectEstimate a owl:ObjectProperty ;
    rdfs:label "has effect estimate" ;
    rdfs:comment "Links a finding to its quantitative effect estimate." ;
    rdfs:domain destiny:Finding ;
    rdfs:range destiny:EffectEstimate .


# =============================================================================
# DATATYPE PROPERTIES (literal values)
# =============================================================================

# -- Identification --

destiny:implementationName a owl:DatatypeProperty ;
    rdfs:label "implementation name" ;
    rdfs:comment "Common name for an intervention (e.g., 'Teaching at the Right Level')." ;
    rdfs:domain destiny:Intervention ;
    rdfs:range xsd:string .

# -- Sample characteristics --

destiny:sampleSize a owl:DatatypeProperty ;
    rdfs:label "sample size" ;
    rdfs:comment "Number of participants in the finding." ;
    rdfs:domain destiny:Finding ;
    rdfs:range xsd:integer .

destiny:attritionRate a owl:DatatypeProperty ;
    rdfs:label "attrition rate" ;
    rdfs:comment "Percentage of sample lost to follow-up (0-100)." ;
    rdfs:domain destiny:Finding ;
    rdfs:range xsd:decimal .

# -- Timing --

destiny:durationWeeks a owl:DatatypeProperty ;
    rdfs:label "duration (weeks)" ;
    rdfs:comment "Duration of intervention in weeks." ;
    rdfs:domain destiny:Intervention ;
    rdfs:range xsd:decimal .

# -- Effect estimate components --

destiny:effectSize a owl:DatatypeProperty ;
    rdfs:label "effect size" ;
    rdfs:comment "The point estimate (e.g., Cohen's d, Hedges' g, odds ratio)." ;
    rdfs:domain destiny:EffectEstimate ;
    rdfs:range xsd:decimal .

destiny:standardError a owl:DatatypeProperty ;
    rdfs:label "standard error" ;
    rdfs:comment "Standard error of the effect estimate." ;
    rdfs:domain destiny:EffectEstimate ;
    rdfs:range xsd:decimal .

destiny:confidenceIntervalLower a owl:DatatypeProperty ;
    rdfs:label "confidence interval (lower)" ;
    rdfs:comment "Lower bound of confidence interval." ;
    rdfs:domain destiny:EffectEstimate ;
    rdfs:range xsd:decimal .

destiny:confidenceIntervalUpper a owl:DatatypeProperty ;
    rdfs:label "confidence interval (upper)" ;
    rdfs:comment "Upper bound of confidence interval." ;
    rdfs:domain destiny:EffectEstimate ;
    rdfs:range xsd:decimal .

destiny:effectSizeType a owl:ObjectProperty ;
    rdfs:label "effect size type" ;
    rdfs:comment "The metric used (Cohen's d, Hedges' g, OR, RR, etc.)." ;
    rdfs:domain destiny:EffectEstimate ;
    rdfs:range skos:Concept .



# =============================================================================
# ANNOTATION PROPERTIES (metadata about entities)
# =============================================================================

destiny:codingNote a owl:AnnotationProperty ;
    rdfs:label "coding note" ;
    rdfs:comment "Free-text note from the coder explaining a decision." .

destiny:codingConfidence a owl:AnnotationProperty ;
    rdfs:label "coding confidence" ;
    rdfs:comment "Coder's confidence in this coding (e.g., high/medium/low)." .
